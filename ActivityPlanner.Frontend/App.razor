@* App.razor *@
@using ActivityPlanner.Frontend.Components.Auth
@using Microsoft.AspNetCore.Components.Authorization
@inject NavigationManager Nav

<CascadingAuthenticationState>
  <Router AppAssembly="@typeof(App).Assembly">
    <Found Context="routeData">
      <AuthorizeRouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)">
        <NotAuthorized>
          @* /login sayfasındaysak yeniden /login'e yönlendirme yapma *@
          @if (Nav.Uri.Contains("/login", StringComparison.OrdinalIgnoreCase))
          {
              <RouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)" />
          }
          else
          {
              <RedirectToLogin />
          }
        </NotAuthorized>
        <Authorizing>
          <p>Oturum doğrulanıyor…</p>
        </Authorizing>
      </AuthorizeRouteView>
    </Found>
    <NotFound>
    
    </NotFound>
  </Router>
</CascadingAuthenticationState>
